<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <title id="naslovTab">Галерија слика</title>
    <link rel="stylesheet" href="../style-cleaned.css" />
    <script src="../centralni_recnik_dodatni.js"></script>
    <script src="../centralni_recnik.js"></script>
    <script src="https://unpkg.com/i18next@23.4.6/dist/umd/i18next.min.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
    <link rel="manifest" href="../images/site.webmanifest">
</head>
<body>
<div class="site-wrapper">
    <header>
        <div class="language-menu">
            <label for="lang">Језик:</label>
            <select id="lang">
                <option value="sr">Српски (ћирилица)</option>
                <option value="sr-Latn">Srpski (latinica)</option>
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="de">Deutsch</option>
                <option value="ru">Русский</option>
                <option value="fr">Français</option>
                <option value="it">Italiano</option>
                <option value="tr">Türkçe</option>
                <option value="zh">中文</option>
                <option value="ja">日本語</option>
                <option value="hi">हिन्दी</option>
                <option value="fa">فارسی</option>
                <option value="ar">العربية</option>
                <option value="vi">Tiếng Việt</option>
                <option value="pt">Português</option>
                <option value="sm">Samoan</option>
                <option value="mi">Māori</option>
                <option value="sw">Kiswahili</option>
                <option value="th">ไทย (Thai)</option>
            </select>
        </div>
        <nav>
            <ul>
                <li><a href="Željeznička stanica Pljevlja - naslovna.html" id="navNaslovna"></a></li>
                <li class="dropdown">
                    <a href="Željeznička stanica Pljevlja - informacije.html" id="navInformacije"></a>
                    <ul class="dropdown-content">
                        <li><a href="Željeznička stanica Pljevlja - informacije.html" id="navOpsteInformacije"></a></li>
                        <li><a href="Željeznička stanica Pljevlja - faq.html" id="navFAQ"></a></li>
                        <li><a href="Željeznička stanica Pljevlja - istorija.html" id="navIstorija"></a></li>
                    </ul>
                </li>
                <li><a href="Željeznička stanica Pljevlja - kontakt.html" id="navKontakt"></a></li>
                <li><a href="Željeznička stanica Pljevlja - vozni red.html" id="navVozniRed"></a></li>
                <li><a href="Željeznička stanica Pljevlja - galerija.html" id="navGalerija"></a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h1 id="galerijaNaslov"></h1>
        <div class="galerija-kategorije">
            <button class="galerija-btn" data-kategorija="stanica" id="katStanica"></button>
            <button class="galerija-btn" data-kategorija="vozovi" id="katVozovi"></button>
            <button class="galerija-btn" data-kategorija="istorija" id="katIstorija"></button>
            <button class="galerija-btn" data-kategorija="okolina" id="katOkolina"></button>
        </div>
        <div id="galerija-grid" class="galerija-grid"></div>
    </main>
    <footer class="footer-grid">
        <div class="footer-col">
            <h4 id="footerZvanicniLinkovi"></h4>
            <ul>
                <li><a href="https://www.zcg-prevoz.me/" target="_blank" rel="noopener" id="footerLinkZCG"></a></li>
                <li><a href="https://www.zicg.me/" target="_blank" rel="noopener" id="footerLinkZICG"></a></li>
                <li><a href="https://www.gov.me/" target="_blank" rel="noopener" id="footerLinkVlada"></a></li>
                <li><a href="https://www.pljevlja.co.me/" target="_blank" id="footerLinkOpština"></a></li>
                <li><a href="https://www.turizampljevlja.me/" target="_blank" id="footerLinkTOP"></a></li>
                <li><a href="https://www.juckpv.me/" target="_blank" id="footerLinkJUCKPV"></a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4 id="footerDrustveneMreze"></h4>
            <ul class="social-links">
                <li><a href="#" aria-label="Facebook" id="footerFacebook"><img src="../images/icons8-facebook-50.svg" alt="Facebook" style="width:20px;height:20px;"><span></span></a></li>
                <li><a href="#" aria-label="Instagram" id="footerInstagram"><img src="../images/icons8-instagram-50.svg" alt="Instagram" style="width:20px;height:20px;"><span></span></a></li>
                <li><a href="#" aria-label="Twitter" id="footerTwitter"><img src="../images/icons8-twitter-50.svg" alt="Twitter" style="width:20px;height:20px;"><span></span></a></li>
            </ul>
        </div>
        <div class="footer-col">
            <div id="footerQRNaslov"></div>
            <!-- QR код овде -->
        </div>
    </footer>
    <script>
        // --- Галерија: слике по категоријама ---
        const slike = {
            stanica: [
                { src: "https://upload.wikimedia.org/wikipedia/commons/2/2c/Podgorica_railway_station_2013.jpg", alt: "alt1", opis: "opis1" },
                { src: "https://upload.wikimedia.org/wikipedia/commons/6/6a/Bar_railway_station_2013.jpg", alt: "alt2", opis: "opis2" }
            ],
            vozovi: [
                { src: "https://upload.wikimedia.org/wikipedia/commons/1/1e/Bar_train_station_2019.jpg", alt: "alt3", opis: "opis3" },
                { src: "https://upload.wikimedia.org/wikipedia/commons/7/7c/Podgorica_train_station_2019.jpg", alt: "alt4", opis: "opis4" }
            ],
            istorija: [
                { src: "https://upload.wikimedia.org/wikipedia/commons/8/8e/Bar_railway_station_platforms.jpg", alt: "alt5", opis: "opis5" }
            ],
            okolina: [
                { src: "https://upload.wikimedia.org/wikipedia/commons/2/2c/Podgorica_railway_station_2013.jpg", alt: "alt6", opis: "opis6" }
            ]
        };

        function prikaziGaleriju(kategorija) {
            const grid = document.getElementById("galerija-grid");
            grid.innerHTML = "";
            slike[kategorija].forEach((slika, idx) => {
                const div = document.createElement("div");
                div.className = "slika-kartica";
                const img = document.createElement("img");
                img.src = slika.src;
                img.alt = i18next.t(slika.alt);
                img.id = slika.alt;
                const opis = document.createElement("div");
                opis.className = "opis";
                opis.id = slika.opis;
                opis.textContent = i18next.t(slika.opis);
                div.appendChild(img);
                div.appendChild(opis);
                grid.appendChild(div);
            });
        }

        // --- i18next и остале функције ---
        i18next.init({
            lng: localStorage.getItem("jezik") || "sr",
            debug: false,
            resources: resources
        }, function(err, t) {
            updateContent();
        });

        function cir2lat(str) {
            const map = {
                А:"A", Б:"B", В:"V", Г:"G", Д:"D", Ђ:"Đ", Е:"E", Ж:"Ž", З:"Z", И:"I", Ј:"J", К:"K", Л:"L", Љ:"Lj", М:"M", Н:"N", Њ:"Nj", О:"O", П:"P", Р:"R", С:"S", Т:"T", Ћ:"Ć", У:"U", Ф:"F", Х:"H", Ц:"C", Ч:"Č", Џ:"Dž", Ш:"Š",
                а:"a", б:"b", в:"v", г:"g", д:"d", ђ:"đ", е:"e", ж:"ž", з:"z", и:"i", ј:"j", к:"k", л:"l", љ:"lj", м:"m", н:"n", њ:"nj", о:"o", п:"p", р:"r", с:"s", т:"t", ћ:"ć", у:"u", ф:"f", х:"h", ц:"c", ч:"č", џ:"dž", ш:"š"
            };
            return str.replace(/[\u0400-\u04FF]/g, function(c) { return map[c] || c; });
        }

        document.getElementById("lang").addEventListener("change", function() {
            const lang = this.value;
            localStorage.setItem("jezik", lang);
            i18next.changeLanguage(lang, updateContent);
        });

        function updateDirection(lang) {
            const rtlLangs = ['ar', 'fa'];
            if (rtlLangs.includes(lang)) {
                document.body.setAttribute('dir', 'rtl');
            } else {
                document.body.setAttribute('dir', 'ltr');
            }
        }

        function transliteratePage() {
            const langSelect = document.getElementById("lang");
            const langHtml = langSelect.innerHTML;
            function transliterateNode(node) {
                if (node.nodeType === 3) {
                    node.nodeValue = cir2lat(node.nodeValue);
                } else if (node.nodeType === 1 && node.childNodes && node.id !== "lang") {
                    node.childNodes.forEach(transliterateNode);
                }
            }
            document.body.childNodes.forEach(transliterateNode);
            langSelect.innerHTML = langHtml;
        }

        function updateContent() {
            const t = i18next.t;
            document.title = t('galerijaNaslov');
            document.getElementById("galerijaNaslov").textContent = t('galerijaNaslov');
            document.getElementById("navNaslovna").textContent = t('navNaslovna');
            document.getElementById("navInformacije").textContent = t('navInformacije');
            document.getElementById("navKontakt").textContent = t('navKontakt');
            document.getElementById("navVozniRed").textContent = t('navVozniRed');
            document.getElementById("navGalerija").textContent = t('navGalerija');
            document.getElementById("navOpsteInformacije").textContent = t('navOpsteInformacije');
            document.getElementById("navFAQ").textContent = t('navFAQ');
            document.getElementById("navIstorija").textContent = t('navIstorija');
            document.getElementById("katStanica").textContent = t('katStanica');
            document.getElementById("katVozovi").textContent = t('katVozovi');
            document.getElementById("katIstorija").textContent = t('katIstorija');
            document.getElementById("katOkolina").textContent = t('katOkolina');
            document.getElementById("footerZvanicniLinkovi").textContent = t("footerZvanicniLinkovi");
            document.getElementById("footerLinkZCG").textContent = t("footerLinkZCG");
            document.getElementById("footerLinkZICG").textContent = t("footerLinkZICG");
            document.getElementById("footerLinkVlada").textContent = t("footerLinkVlada");
            document.getElementById("footerDrustveneMreze").textContent = t("footerDrustveneMreze");
            document.querySelector("#footerFacebook span").textContent = t("footerFacebook");
            document.querySelector("#footerInstagram span").textContent = t("footerInstagram");
            document.querySelector("#footerTwitter span").textContent = t("footerTwitter");
            document.getElementById("footerQRNaslov").textContent = t("footerQRNaslov");
            document.getElementById("footerLinkTOP").textContent = t("footerLinkTOP");
            document.getElementById("footerLinkJUCKPV").textContent = t("footerLinkJUCKPV");
            document.getElementById("footerLinkOpština").textContent = t("footerLinkOpština");
            updateDirection(i18next.language);

            // Галерија: поново прикажи тренутну категорију са преводима
            prikaziGaleriju(trenutnaKategorija);

            // Ако је латиница, транслитериши целу страницу осим менија за језик
            if (i18next.language === "sr-Latn") {
                transliteratePage();
            }
        }

        // Категорије: активна категорија
        let trenutnaKategorija = "stanica";
        document.querySelectorAll(".galerija-btn").forEach(btn => {
            btn.onclick = function() {
                trenutnaKategorija = this.dataset.kategorija;
                prikaziGaleriju(trenutnaKategorija);
                document.querySelectorAll(".galerija-btn").forEach(b => b.classList.remove("active"));
                this.classList.add("active");
            };
        });

        // Прикажи прву категорију по дифолту
        prikaziGaleriju(trenutnaKategorija);

        // Инит језика и садржаја
        window.onload = function() {
            let savedLang = localStorage.getItem("jezik") || "sr";
            document.getElementById("lang").value = savedLang;
            i18next.changeLanguage(savedLang, updateContent);
        };
    </script>
</div>
</body>
</html>